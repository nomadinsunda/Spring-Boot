# ğŸ§  `@AutoConfiguration` vs `@Configuration` â€” Spring ì„¤ì • í´ë˜ìŠ¤ì˜ ì§„í™”ì™€ ì°¨ì´ì  ì™„ì „ ë¶„ì„

> â€œì´ì œëŠ” ëª¨ë“  ì„¤ì • í´ë˜ìŠ¤ì— `@Configuration`ì„ ì“°ì§€ ì•Šì•„ë„ ëœë‹¤.
> ìë™ êµ¬ì„±(AutoConfiguration)ì„ ìœ„í•œ ìƒˆë¡œìš´ ë°©ì‹, `@AutoConfiguration`ì„ ì´í•´í•˜ì.â€

---

## âœ… 1. ê³µí†µì : ë‘˜ ë‹¤ Java ê¸°ë°˜ ì„¤ì • í´ë˜ìŠ¤ë‹¤

| í•­ëª©             | ì„¤ëª…                                                 |
| -------------- | -------------------------------------------------- |
| ê³µí†µì             | ë‘˜ ë‹¤ `@Bean` ë©”ì„œë“œë¥¼ ì„ ì–¸í•˜ì—¬ Bean ì •ì˜ ê°€ëŠ¥                   |
| ë‚´ë¶€ ê³µí†µ ì• ë„ˆí…Œì´ì…˜    | ë‘˜ ë‹¤ `@Configuration`ì„ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘ (ì§ì ‘ ë˜ëŠ” ê°„ì ‘ì ìœ¼ë¡œ)        |
| ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ë“±ë¡ ë°©ì‹ | ë‘˜ ë‹¤ `BeanDefinition`ìœ¼ë¡œ ë³€í™˜ë˜ì–´ ApplicationContextì— ë“±ë¡ |

---

## âœ… 2. @Configuration â€” ì „í†µì ì¸ ì„¤ì • í´ë˜ìŠ¤

```java
@Configuration
public class AppConfig {
    @Bean
    public UserService userService() {
        return new UserService();
    }
}
```

### íŠ¹ì§•

* ê°€ì¥ ê¸°ë³¸ì ì¸ Java ì„¤ì • í´ë˜ìŠ¤
* ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ë˜ëŠ” ëª…ì‹œì  ë“±ë¡ìœ¼ë¡œ ì»¨í…ìŠ¤íŠ¸ì— í¬í•¨
* **ëª…ì‹œì ìœ¼ë¡œ @Import**, `@ComponentScan`, `@EnableXxx` ë“±ì— í¬í•¨ë˜ì–´ì•¼ í™œì„±í™”ë¨

---

## âœ… 3. @AutoConfiguration â€” Spring Boot 3.xì˜ ìƒˆë¡œìš´ ìë™ ì„¤ì • ì• ë„ˆí…Œì´ì…˜

```java
@AutoConfiguration
public class MyAutoConfiguration {
    @Bean
    public MyService myService() {
        return new MyService();
    }
}
```

### íŠ¹ì§•

* Spring Boot 3.0 ì´í›„ ë„ì…
* `@Configuration`ì˜ íŠ¹ìˆ˜í™”ëœ ë²„ì „ (ì‚¬ì‹¤ìƒ ìƒì†ë¨)
* **ìë™ êµ¬ì„±ìš© ì„¤ì • í´ë˜ìŠ¤**ì— íŠ¹í™”ë¨
* **ìë™ìœ¼ë¡œ ë“±ë¡ë˜ì§€ ì•ŠìŒ â†’ ë°˜ë“œì‹œ `META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports`ë¡œ ì„ ì–¸**

---

## âœ… 4. @AutoConfigurationì˜ í•µì‹¬ íŠ¹ì§• ì •ë¦¬

| í•­ëª©            | ì„¤ëª…                                                       |
| ------------- | -------------------------------------------------------- |
| íŒ¨í‚¤ì§€           | `org.springframework.boot.autoconfigure`                 |
| ë©”íƒ€ ì• ë„ˆí…Œì´ì…˜      | ë‚´ë¶€ì ìœ¼ë¡œ `@Configuration(proxyBeanMethods = false)` í¬í•¨      |
| ìë™ ë“±ë¡ ì—¬ë¶€      | âŒ ê¸°ë³¸ì ìœ¼ë¡œëŠ” ìë™ ìŠ¤ìº”ë˜ì§€ ì•ŠìŒ                                      |
| ë“±ë¡ ë°©ì‹         | `AutoConfiguration.imports` íŒŒì¼ë¡œ ëª…ì‹œ                       |
| ì‚¬ìš© ëª©ì          | ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬, ëª¨ë“ˆ, JARì— í¬í•¨ëœ ìë™ êµ¬ì„± ëª¨ë“ˆ ì‘ì„±                       |
| ì˜ˆì™¸ ì²˜ë¦¬, ì¡°ê±´ë¶€ êµ¬ì„± | `@ConditionalOnClass`, `@ConditionalOnMissingBean` ë“±ê³¼ ì¡°í•© |

---

## âœ… 5. ì‹¤ì œ ë“±ë¡ ë°©ì‹ ë¹„êµ

### âœ… @Configuration í´ë˜ìŠ¤ ë“±ë¡ íë¦„

* ìŠ¤í”„ë§ì´ í´ë˜ìŠ¤íŒ¨ìŠ¤ì—ì„œ `@ComponentScan`, `@Import`, `@EnableAutoConfiguration` ë“±ìœ¼ë¡œ ëª…ì‹œì ìœ¼ë¡œ ë“±ë¡

### âœ… @AutoConfiguration í´ë˜ìŠ¤ ë“±ë¡ íë¦„

* `META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports` íŒŒì¼ì— FQCNìœ¼ë¡œ ë“±ë¡

ì˜ˆì‹œ:

```properties
# spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports
com.example.config.MyAutoConfiguration
```

â¡ Spring Boot 3.x ì´í›„ `spring.factories`ë¥¼ ëŒ€ì²´í•˜ëŠ” ë°©ì‹

---

## âœ… 6. ë‚´ë¶€ ì†ŒìŠ¤ ë¹„êµ

### `@Configuration`

```java
@Target(TYPE)
@Retention(RUNTIME)
@Documented
@Import(ConfigurationClassPostProcessor.class)
public @interface Configuration {
}
```

### `@AutoConfiguration`

```java
@Target(TYPE)
@Retention(RUNTIME)
@Documented
@Inherited
@Configuration(proxyBeanMethods = false)
@AutoConfiguration
public @interface AutoConfiguration {
}
```

â¡ `@AutoConfiguration`ì€ **`@Configuration(proxyBeanMethods = false)`** ë¥¼ í¬í•¨í•˜ë©°,
ê¸°ë³¸ì ìœ¼ë¡œ `CGLIB` í”„ë¡ì‹œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤ (ì„±ëŠ¥ ìµœì í™” ëª©ì ).

---

## âœ… 7. @AutoConfigurationì´ ì¶”ì²œë˜ëŠ” ìƒí™©

| ì‚¬ìš© ìƒí™©                       | ì´ìœ                                                      |
| --------------------------- | ------------------------------------------------------ |
| ë³„ë„ ë¼ì´ë¸ŒëŸ¬ë¦¬/ëª¨ë“ˆì—ì„œ ì„¤ì • í´ë˜ìŠ¤ë¥¼ ì œê³µí•  ë•Œ | API ì‚¬ìš©ìì—ê²Œ ë¶€ë‹´ì„ ì¤„ì´ì§€ ì•Šê³  ìë™ êµ¬ì„± ì ìš© ê°€ëŠ¥                       |
| íŠ¹ì • ì¡°ê±´ì— ë”°ë¼ ìë™ Bean êµ¬ì„± í•„ìš”í•  ë•Œ  | `@ConditionalOnClass`, `@ConditionalOnProperty`ì™€ í•¨ê»˜ ì‚¬ìš© |
| ë³µì¡í•œ ìˆ˜ë™ ë“±ë¡ ê³¼ì •ì„ ì œê±°í•˜ê³  ì‹¶ì„ ë•Œ     | `spring.factories` ì—†ì´ `.imports` ê¸°ë°˜ìœ¼ë¡œ ëª…ì‹œ ê°€ëŠ¥            |

---

## âœ… ë§ˆë¬´ë¦¬ ë¹„êµ ìš”ì•½

| í•­ëª©       | @Configuration                          | @AutoConfiguration (Spring Boot 3+)      |
| -------- | --------------------------------------- | ---------------------------------------- |
| ì •ì˜       | ì¼ë°˜ Java ì„¤ì • í´ë˜ìŠ¤                          | ìë™ êµ¬ì„±ìš© íŠ¹ìˆ˜ ì„¤ì • í´ë˜ìŠ¤                         |
| ìë™ ìŠ¤ìº” ì—¬ë¶€ | O (`@ComponentScan`, `@Import`) ë“±       | âŒ (imports íŒŒì¼ì— ëª…ì‹œ í•„ìš”)                    |
| ë‚´ë¶€ ê¸°ë°˜    | `@Configuration(proxyBeanMethods=true)` | `@Configuration(proxyBeanMethods=false)` |
| ë“±ë¡ ë°©ì‹    | ì§ì ‘ ë“±ë¡ or ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”                        | `.imports` íŒŒì¼ ë“±ë¡                         |
| ì£¼ìš” ëª©ì     | ì‚¬ìš©ì ì„¤ì •                                  | ë¼ì´ë¸ŒëŸ¬ë¦¬/ìë™ êµ¬ì„± ëª¨ë“ˆ ì œê³µ ëª©ì                      |

