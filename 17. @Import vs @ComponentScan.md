# ğŸ” `@Import` vs `@ComponentScan` â€” Springì˜ ì»´í¬ë„ŒíŠ¸ ë“±ë¡ ì „ëµ ë¹„êµ

> â€œSpringì—ì„œ Beanì„ ë“±ë¡í•˜ëŠ” ë°©ë²•ì€ í•˜ë‚˜ê°€ ì•„ë‹ˆë‹¤.
> ì˜ë„ì— ë”°ë¼ `@ComponentScan`ê³¼ `@Import`ëŠ” ì „í˜€ ë‹¤ë¥¸ í™•ì¥ì„±ê³¼ í†µì œë ¥ì„ ì œê³µí•œë‹¤.â€

---

## âœ… ê³µí†µì 

| í•­ëª©    | ì„¤ëª…                                                |
| ----- | ------------------------------------------------- |
| ì—­í•     | Spring ì»¨í…Œì´ë„ˆì— BeanDefinitionì„ ë“±ë¡                   |
| ëŒ€ìƒ    | í´ë˜ìŠ¤(ì»´í¬ë„ŒíŠ¸ ë˜ëŠ” ì„¤ì • í´ë˜ìŠ¤)                               |
| ë“±ë¡ ì‹œì  | ApplicationContext ì´ˆê¸°í™” ì‹œì  (`refresh()` ì´ì „)        |
| ìµœì¢… ê²°ê³¼ | ëª¨ë‘ `BeanDefinitionRegistry`ì— BeanDefinitionìœ¼ë¡œ ë“±ë¡ë¨ |

---

## âœ… 1. `@ComponentScan` â€” ìë™ íƒì§€ ê¸°ë°˜ ë“±ë¡

### âœ… ê°œìš”

```java
@Configuration
@ComponentScan(basePackages = "com.example")
public class AppConfig {}
```

* ì§€ì •ëœ íŒ¨í‚¤ì§€ ì´í•˜ì˜ `.class` íŒŒì¼ì„ ëª¨ë‘ ìŠ¤ìº”
* `@Component`, `@Service`, `@Repository`, `@Controller`ê°€ ë¶™ì€ í´ë˜ìŠ¤ë§Œ ë“±ë¡
* `ClassPathBeanDefinitionScanner` ì‚¬ìš©

### âœ… íŠ¹ì§•

| í•­ëª©        | ì„¤ëª…                                     |
| --------- | -------------------------------------- |
| ìë™ íƒì§€     | O (íŒ¨í‚¤ì§€ ê¸°ì¤€ìœ¼ë¡œ ëŒ€ëŸ‰ íƒìƒ‰)                     |
| ì¡°ê±´ ê¸°ë°˜ í•„í„°ë§ | O (`includeFilters`, `excludeFilters`) |
| í•„í„° í™•ì¥     | O (`TypeFilter` ì‚¬ìš© ê°€ëŠ¥)                 |
| ë™ì  ì œì–´     | âŒ (ì •ì  íŒ¨í„´ ê¸°ë°˜)                           |

---

## âœ… 2. `@Import` â€” ëª…ì‹œì  / ë™ì  ë“±ë¡

### âœ… ê¸°ë³¸ ì‚¬ìš©

```java
@Configuration
@Import(MyConfig.class)
public class AppConfig {}
```

* `@Configuration` ë˜ëŠ” ì¼ë°˜ í´ë˜ìŠ¤ë„ ê°€ëŠ¥
* í´ë˜ìŠ¤ ë‹¨ìœ„ë¡œ **ëª…ì‹œì ìœ¼ë¡œ ë“±ë¡**ë¨

### âœ… í™•ì¥ ì‚¬ìš©

`@Import`ëŠ” ë‹¤ìŒ ì„¸ ê°€ì§€ íƒ€ì…ì„ ì§€ì›:

| íƒ€ì…                              | ì—­í•                                 |
| ------------------------------- | --------------------------------- |
| `@Configuration` í´ë˜ìŠ¤            | ì¼ë°˜ ì„¤ì • í´ë˜ìŠ¤ ì§ì ‘ ë“±ë¡                   |
| `ImportSelector`                | ë¬¸ìì—´ ê¸°ë°˜ êµ¬ì„± í´ë˜ìŠ¤ ëª©ë¡ ë°˜í™˜               |
| `ImportBeanDefinitionRegistrar` | BeanDefinitionRegistry ì¡°ì‘ìœ¼ë¡œ ë™ì  ë“±ë¡ |

---

### âœ… ImportSelector ì˜ˆì‹œ

```java
public class MySelector implements ImportSelector {
    public String[] selectImports(AnnotationMetadata metadata) {
        return new String[] {
            "com.example.ConfigA",
            "com.example.ConfigB"
        };
    }
}
```

```java
@Import(MySelector.class)
public class MainConfig {}
```

â¡ ëŸ°íƒ€ì„ ì¡°ê±´ì— ë”°ë¼ êµ¬ì„± í´ë˜ìŠ¤ë¥¼ ë™ì ìœ¼ë¡œ ê²°ì •í•˜ì—¬ ë“±ë¡

---

### âœ… ImportBeanDefinitionRegistrar ì˜ˆì‹œ

```java
public class MyRegistrar implements ImportBeanDefinitionRegistrar {
    public void registerBeanDefinitions(AnnotationMetadata metadata, BeanDefinitionRegistry registry) {
        BeanDefinition bd = BeanDefinitionBuilder
            .genericBeanDefinition(MyService.class)
            .getBeanDefinition();
        registry.registerBeanDefinition("myService", bd);
    }
}
```

```java
@Import(MyRegistrar.class)
public class MainConfig {}
```

â¡ `BeanDefinition` ìì²´ë¥¼ ì½”ë“œë¡œ ìƒì„±í•˜ì—¬ ë“±ë¡ ê°€ëŠ¥

---

## âœ… 3. ë¹„êµ ì •ë¦¬

| í•­ëª©          | @ComponentScan             | @Import                                      |
| ----------- | -------------------------- | -------------------------------------------- |
| ë“±ë¡ ëŒ€ìƒ       | `@Component` ì• ë„ˆí…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ | íŠ¹ì • í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ì§€ì • (`@Configuration`, Selector ë“±) |
| ë“±ë¡ ë°©ì‹       | Classpath ìŠ¤ìº”               | ëª…ì‹œì /í”„ë¡œê·¸ë˜ë°ì  ë“±ë¡                                |
| ìœ ì—°ì„±         | ë‚®ìŒ (ì •ì  íŒ¨í„´ ê¸°ë°˜)              | ë†’ìŒ (ì¡°ê±´ ê¸°ë°˜, ë™ì  êµ¬ì„± ê°€ëŠ¥)                         |
| í•„í„°ë§         | ì• ë„ˆí…Œì´ì…˜, íƒ€ì…, ì»¤ìŠ¤í…€ í•„í„° ë“± ê°€ëŠ¥     | ì¡°ê±´ í•„í„°ë§ì€ ì§ì ‘ êµ¬í˜„í•´ì•¼ í•¨                            |
| ë™ì  êµ¬ì„±       | ë¶ˆê°€                         | ê°€ëŠ¥ (ImportSelector, Registrar í™œìš©)            |
| ëŒ€í‘œ ì‚¬ìš©ì²˜      | ëŒ€ê·œëª¨ ì¼ë°˜ì ì¸ Bean íƒì§€           | Framework ë‚´ë¶€ ì„¤ì •, ë¼ì´ë¸ŒëŸ¬ë¦¬ ì œê³µìš©, ì»¤ìŠ¤í…€ ë“±ë¡ ë“±         |
| í™•ì¥ì„±ê³¼ ìº¡ìŠí™” ì¸¡ë©´ | ìŠ¤í”„ë§ ê¸°ë³¸ êµ¬ì¡°ì—ì„œ ì‚¬ìš©             | Spring Boot ìë™ ì„¤ì •, @EnableXXXì˜ í•µì‹¬ ê¸°ë°˜         |

---

## âœ… 4. ì–¸ì œ ì–´ë–¤ ê±¸ ì¨ì•¼ í•˜ë‚˜?

| ìƒí™©                                     | ì¶”ì²œ ë°©ì‹                            |
| -------------------------------------- | -------------------------------- |
| ì¼ë°˜ì ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ ë“±ë¡                 | `@ComponentScan`                 |
| íŠ¹ì • êµ¬ì„± í´ë˜ìŠ¤ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì¬ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œ            | `@Import(Config.class)`          |
| ì¡°ê±´ì ìœ¼ë¡œ ì„¤ì • í´ë˜ìŠ¤ë¥¼ ë“±ë¡í•˜ê³  ì‹¶ì„ ë•Œ (ì˜ˆ: API ì¡´ì¬ ì—¬ë¶€) | `ImportSelector`                 |
| Beanì„ ì§ì ‘ ì½”ë“œë¡œ ì •ì˜í•˜ê³  ì‹¶ì„ ë•Œ                 | `ImportBeanDefinitionRegistrar`  |
| @EnableXxx ì• ë„ˆí…Œì´ì…˜ ë§Œë“¤ê³  ì‹¶ì„ ë•Œ              | `@Import(Registrar or Selector)` |

---

## âœ… ê²°ë¡  ìš”ì•½

| í•­ëª©                       | @ComponentScan         | @Import                           |
| ------------------------ | ---------------------- | --------------------------------- |
| ë“±ë¡ ë°©ì‹                    | í´ë˜ìŠ¤íŒ¨ìŠ¤ íƒìƒ‰ í›„ ì• ë„ˆí…Œì´ì…˜ ê¸°ë°˜ ë“±ë¡ | ëª…ì‹œì  ë˜ëŠ” ë™ì  (ì½”ë“œ ê¸°ë°˜) ë“±ë¡              |
| ë™ì  ì œì–´ ê°€ëŠ¥ì„±                | X                      | O (`ImportSelector`, `Registrar`) |
| ë„ì… ì§„ì…ì¥ë²½                  | ë‚®ìŒ (Spring ì´ˆê¸‰ë„ ì‚¬ìš© ê°€ëŠ¥)  | ì¤‘ê¸‰ ì´ìƒ (í”„ë ˆì„ì›Œí¬/ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°œë°œìš©)           |
| Spring Boot Starterì—ì„œ ì‚¬ìš© | ê±°ì˜ ì•ˆ ì”€                 | í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ ê´‘ë²”ìœ„í•˜ê²Œ ì‚¬ìš©ë¨               |

