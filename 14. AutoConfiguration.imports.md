# ğŸš€ Spring Boot 3.xì˜ ìƒˆë¡œìš´ ìë™ êµ¬ì„± ë©”íƒ€ ì‹œìŠ¤í…œ: `AutoConfiguration.imports`

> â€œë” ì´ìƒ `spring.factories`ì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤.
> AOT ìµœì í™”ì™€ ëª…ì‹œì  ìë™ êµ¬ì„±ì„ ìœ„í•œ ìƒˆë¡œìš´ ë°©ì‹, `AutoConfiguration.imports`ë¥¼ ì´í•´í•˜ì.â€

---

## âœ… ë°°ê²½: ì™œ ìƒˆë¡œìš´ ë©”íƒ€ ì‹œìŠ¤í…œì´ í•„ìš”í•œê°€?

### ğŸ“Œ ê¸°ì¡´ ë°©ì‹: `spring.factories`

```properties
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
com.example.MyAutoConfiguration
```

* Spring Boot 2.xê¹Œì§€ëŠ” `META-INF/spring.factories` íŒŒì¼ì— ìë™ êµ¬ì„± í´ë˜ìŠ¤ë¥¼ ë“±ë¡
* ê·¸ëŸ¬ë‚˜ ë¬¸ì œì :

  * ë‹¨ì¼ keyì— ëª¨ë“  êµ¬ì„± í´ë˜ìŠ¤ â†’ **ë¶„ì„ê³¼ ë””ë²„ê¹… ì–´ë ¤ì›€**
  * Native Image(AOT) ì»´íŒŒì¼ ì‹œ ë¶„ì„ì´ ì–´ë ¤ì›€
  * êµ¬ì„±ì´ ë„ˆë¬´ ë¬µì‹œì ì´ë©° ë‹¤ì´ë‚˜ë¯¹

### âœ… ìƒˆë¡œìš´ ë°©ì‹ì˜ í•„ìš”ì„±

Spring Boot 3.0ë¶€í„°ëŠ” GraalVM Native Image, AOT ë¶„ì„ ìµœì í™”ë¥¼ ìœ„í•´
ë” **ì •ì ì´ê³  ëª…ì‹œì ì´ë©° ë¶„í•  ê°€ëŠ¥í•œ êµ¬ì¡°**ê°€ í•„ìš”í–ˆê³ ,
ê·¸ ê²°ê³¼ë¡œ `AutoConfiguration.imports` ë©”íƒ€ ì‹œìŠ¤í…œì´ ë„ì…ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## âœ… 1. ê¸°ë³¸ ê°œë…

### ğŸ“„ íŒŒì¼ ìœ„ì¹˜ ë° ì´ë¦„

```text
META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports
```

### ğŸ“„ ë‚´ìš© ì˜ˆì‹œ (í´ë˜ìŠ¤ ì´ë¦„ë§Œ ì‘ì„±)

```text
com.example.MyAutoConfiguration
com.example.DataSourceAutoConfiguration
```

â¡ ê° í•­ëª©ì€ `@AutoConfiguration` í˜¹ì€ `@Configuration`ì´ ë¶™ì€ í´ë˜ìŠ¤ì—¬ì•¼ í•¨.

---

## âœ… 2. ë™ì‘ íë¦„

### âœ… @EnableAutoConfiguration â†’ AutoConfigurationImportSelector

```java
@EnableAutoConfiguration
    â†“
AutoConfigurationImportSelector
    â†“
AutoConfigurationEntries.from(...)
    â†“
AutoConfiguration.imports íŒŒì¼ì„ ë¡œë”©
    â†“
í´ë˜ìŠ¤ ì´ë¦„ ëª©ë¡ì„ ì½ê³  â†’ @Configurationìœ¼ë¡œ ë“±ë¡
```

â¡ Spring BootëŠ” `AutoConfiguration.imports` íŒŒì¼ë“¤ì„ ëª¨ë‘ ë¡œë”©í•˜ì—¬
ìë™ ì„¤ì • í´ë˜ìŠ¤ ëª©ë¡ì„ êµ¬ì„±í•˜ê³ , ì¡°ê±´ë¶€ë¡œ ì»¨í…ìŠ¤íŠ¸ì— í¬í•¨ì‹œí‚µë‹ˆë‹¤.

---

## âœ… 3. ê¸°ì¡´ `spring.factories`ì™€ì˜ ì°¨ì´ì 

| í•­ëª©      | `spring.factories`                        | `AutoConfiguration.imports`                                                        |
| ------- | ----------------------------------------- | ---------------------------------------------------------------------------------- |
| ìœ„ì¹˜      | `META-INF/spring.factories`               | `META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports` |
| í˜•ì‹      | Key-Value (`EnableAutoConfiguration=...`) | Value-only (FQCN ëª©ë¡ë§Œ ë‚˜ì—´)                                                           |
| AOT ìµœì í™” | âŒ ì–´ë µë‹¤                                     | âœ… ì •ì  ë¶„ì„ì— ìµœì í™”                                                                       |
| ë³‘í•© ë°©ì‹   | ëª¨ë“  JARì—ì„œ í•˜ë‚˜ì˜ key ì•„ë˜ ë¦¬ìŠ¤íŠ¸ ê²°í•©                | ê° JARë§ˆë‹¤ ë¶„í• ëœ imports íŒŒì¼ ë³‘í•©                                                          |
| ë„êµ¬ ì§€ì›   | ì¼ë¶€ í”ŒëŸ¬ê·¸ì¸, ìˆ˜ë™ ê´€ë¦¬                            | Gradle/Spring Boot Plugin ì§€ì› ì˜ˆì •                                                    |

---

## âœ… 4. ìë™ ì„¤ì • í´ë˜ìŠ¤ ì‘ì„± ë°©ì‹

### âœ… 1ë‹¨ê³„: ì„¤ì • í´ë˜ìŠ¤ ë§Œë“¤ê¸°

```java
@AutoConfiguration
public class MyAutoConfiguration {

    @Bean
    public MyService myService() {
        return new MyService();
    }
}
```

> `@AutoConfiguration`ì€ ë‚´ë¶€ì ìœ¼ë¡œ `@Configuration(proxyBeanMethods = false)`ì„ í¬í•¨

### âœ… 2ë‹¨ê³„: `.imports` íŒŒì¼ì— ë“±ë¡

```text
# META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports
com.example.MyAutoConfiguration
```

> ì´ íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´, `@AutoConfiguration` í´ë˜ìŠ¤ëŠ” ì•„ë¬´ë¦¬ ìˆì–´ë„ ìë™ ë“±ë¡ë˜ì§€ ì•ŠìŒ.

---

## âœ… 5. spring.factories ì™€ ë³‘í–‰ ì‚¬ìš© ê°€ëŠ¥?

ì˜ˆ. Spring Boot 3.xëŠ” ì—¬ì „íˆ `spring.factories`ë„ ì§€ì›í•©ë‹ˆë‹¤.
ë‹¨, **ìƒˆë¡œìš´ ë°©ì‹ì´ ìš°ì„  ì ìš©ë˜ë©°, `spring.factories`ëŠ” ì ì°¨ deprecated ë°©í–¥ìœ¼ë¡œ ì „í™˜**ë©ë‹ˆë‹¤.

---

## âœ… 6. ì‹¤ì „ ì˜ˆì‹œ: ëª¨ë“ˆí˜• AutoConfiguration

```
my-starter-module/
â”œâ”€â”€ src/main/java/com/example/MyAutoConfiguration.java
â”œâ”€â”€ src/main/resources/
â”‚   â””â”€â”€ META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports
â”‚       â†’ com.example.MyAutoConfiguration
```

â¡ ì´ë ‡ê²Œ ëª¨ë“ˆí™”ëœ êµ¬ì„± í´ë˜ìŠ¤ëŠ” ì™¸ë¶€ í”„ë¡œì íŠ¸ì— ì¶”ê°€ë§Œ í•˜ë©´ ìë™ìœ¼ë¡œ í™œì„±í™”ë©ë‹ˆë‹¤.

---

## âœ… 7. AOT ìµœì í™”ë¥¼ ìœ„í•œ ì´ìœ 

* GraalVM Native ImageëŠ” ë¦¬í”Œë ‰ì…˜ ê¸°ë°˜ ë¡œë”©ì„ ì œí•œí•¨
* `.imports` íŒŒì¼ì€ **ì •ì ìœ¼ë¡œ í´ë˜ìŠ¤ ì´ë¦„ì´ ëª…ì‹œë˜ë¯€ë¡œ** AOT ë¶„ì„ì´ ê°€ëŠ¥
* Spring Bootì˜ `native-image.properties` ë˜ëŠ” `spring-aot.json` ë“±ê³¼ ì˜ í†µí•©ë¨

---

## âœ… ë§ˆë¬´ë¦¬ ìš”ì•½

| í•­ëª©              | ì„¤ëª…                                                                                 |
| --------------- | ---------------------------------------------------------------------------------- |
| ë„ì… ì‹œê¸°           | Spring Boot 3.0ë¶€í„°                                                                  |
| ê¸°ì¡´ ë°©ì‹ê³¼ ë³‘í–‰ ê°€ëŠ¥ ì—¬ë¶€ | ê°€ëŠ¥ (`spring.factories` + `.imports`)                                               |
| ì£¼ìš” ëª©ì            | AOT, Native Image, ì„±ëŠ¥ ìµœì í™”, ëª…ì‹œì„±                                                     |
| ë“±ë¡ ëŒ€ìƒ           | `@AutoConfiguration` í´ë˜ìŠ¤                                                           |
| ë“±ë¡ íŒŒì¼           | `META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports` |
| ì§€ì› ë„êµ¬           | Spring Boot Gradle Plugin ë“± (ì˜ˆì •)                                                   |

